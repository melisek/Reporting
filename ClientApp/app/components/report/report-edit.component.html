
<div class="clearfix">
    <mat-form-field floatPlaceholder="never">
        <input matInput #name id="name" placeholder="Report name">
    </mat-form-field>
</div>

<mat-tab-group dynamicHeight="false">
    <mat-tab>
        <ng-template mat-tab-label>
            <mat-icon class="md-18">view_headline</mat-icon> Data source
        </ng-template>

        <div class="margin-top-20">
            <div class="col-md-2 padding-left-3">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>Select Data source</mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                        <form>
                            <mat-select placeholder="Query" #query [(ngModel)]="selectedValue" (ngModelChange)="queryChange()" name="query" class="margin-top-20 fit-container">
                                <mat-option *ngFor="let query of queries" [value]="query.id">
                                    {{query.name}}
                                </mat-option>
                            </mat-select>
                        </form>

                        <mat-selection-list #columns *ngIf="queryColumns" class="margin-top-20">
                            <mat-list-option *ngFor="let column of queryColumns.columns" value="{{column}}">
                                {{column}}
                            </mat-list-option>
                        </mat-selection-list>
                    </mat-card-content>
                    <mat-card-actions>
                        <button mat-raised-button color="primary" (click)="onSaveClick()" [disabled]="query && columns && columns.selectedOptions.selected.length == 0" class="margintop20">Save</button>
                        <button mat-raised-button color="accent" (click)="onUpdateClick()" [disabled]="query && columns && columns.selectedOptions.selected.length == 0" class="margintop20">Update</button>
                    </mat-card-actions>
                </mat-card>
            </div>
            <div class="col-md-10">
                <div class="clearfix" [hidden]="!showDataTable">
                    <mat-form-field floatPlaceholder="never">
                        <input matInput #filter placeholder="Filter reports">
                    </mat-form-field>
                </div>

                <div [hidden]="!showDataTable">
                    <mat-table #table [dataSource]="dataSource" matSort matSortActive="id" matSortDisableClear matSortDirection="asc">
                        <ng-container *ngFor="let column of columnNames" [matColumnDef]="column.columnDef">
                            <mat-header-cell *matHeaderCellDef>{{ column.header }}</mat-header-cell>
                            <mat-cell *matCellDef="let row">{{ column.cell(row) }}</mat-cell>
                        </ng-container>

                        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

                    </mat-table>

                    <mat-paginator #paginator
                                   [length]="dataSource.totalCount"
                                   [pageSize]="2">
                    </mat-paginator>
                </div>

            </div>
        </div>
    </mat-tab>
    <mat-tab>
        <ng-template mat-tab-label>
            <mat-icon class="md-18">pie_chart</mat-icon> Chart
        </ng-template>

        <chart-editor></chart-editor>
    </mat-tab>
</mat-tab-group>
